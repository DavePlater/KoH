<html>
<head>
<title>KoH Monster Brew</title>
<meta charset="UTF-8">
<meta name="author" content="KingPlater" />
<meta name="description" content="https://daveplater.github.io/KoH/MonsterBrew.html" />
<style type="text/css">
	.CurrentQuest { font-weight:bold; color:red;}
</style>
<script type="text/javascript">

	// not to self: Include a table giving the "1/2/3 star" reqs for each quest in each bracket? hmm
	// TH 23-25: { DragonQuest:[664000 , 1327000 , 4117000], SlayerQuest:[]	}
	// TH 19-22: { DragonQuest:[371000, 882,000, 2540000], SlayerQuest:[]	}
	// TH 16-18: { DragonQuest:[], SlayerQuest:[]	}
	// TH 13-15: { DragonQuest:[240000,587000,882000], SlayerQuest:[]	}
	// TH 10-12: { DragonQuest:[], SlayerQuest:[]	}
	// TH 07-09: { DragonQuest:[], SlayerQuest:[]	}
	// TH 04-06: { DragonQuest:[], SlayerQuest:[]	}
	// TH 01-03: { DragonQuest:[], SlayerQuest:[]	}
var PointValues =
{
	SlayerQuest: {Name:"Slayer Quest", MonsterHit:250, MonsterKill:1250, TitanHit:1500, TitanKill:45000},
	DailyClan:{Name:"Daily Clan Quest", MonsterHit:500, MonsterKill:2500, TitanHit:3000, TitanKill:90000},
	DragonQuest:{Name:"Dragon Quest", MonsterHit:3250, MonsterKill:16250, TitanHit:19500, TitanKill:585000},
	AllYouCanSlay:{Name:"All You Can Slay Quest", MonsterHit:3250, MonsterKill:16250, TitanHit:19500, TitanKill:585000}
};
var oActivePointList=PointValues["SlayerQuest"];

	function sHTML(strID,strHTML)	{		var o=document.getElementById(strID);		if(o!=undefined)		{			o.innerHTML=strHTML;		}	}
	function sCB(strID, bChecked){var o=document.getElementById(strID);		if(o!=undefined)		{	o.checked =bChecked;}	}
	function sV(strID,strValue)	{		var o=document.getElementById(strID);		if(o!=undefined)		{			o.value=strValue;		}	}
	function gCB(strID)	{		var retval=false;		var o=document.getElementById(strID);		if(o!=undefined)		{			retval=o.checked;		}		return retval;	}
	function gV(strID)	{		var retval="";		var o=document.getElementById(strID);		if(o!=undefined)		{			retval=o.value;		}		return retval;	}
	
	
	function PointListToTable(strPointValueObjectName)
	{
		var oPointList = PointValues[strPointValueObjectName];
		var tblPointListings=document.getElementById("tblPointListings");
		if(tblPointListings!=undefined && oPointList!=undefined)
		{
			var str="";
			str+="<tr><th colspan=\"3\">"+oPointList["Name"]+"</th><td><button onclick=\"btQuestSelect_Click('"+strPointValueObjectName+"')\">Select</button></td></tr>\r\n";
			str+="<tr><th>Monster Hit</th><td>"+oPointList["MonsterHit"]+"</td><th>Monster Kill</th><td>"+oPointList["MonsterKill"]+"</td></tr>\r\n";
			str+="<tr><th>Titan Hit</th><td>"+oPointList["TitanHit"]+"</td><th>Titan Kill</th><td>"+oPointList["TitanKill"]+"</td></tr>\r\n";
			var newBody=document.createElement ("tbody");
			newBody.id="tbody_"+strPointValueObjectName;
			newBody.innerHTML=str;
			tblPointListings.appendChild(newBody);			
		}	
	}
	
	function ClearTBODYColors()
	{
		var tblPointListings=document.getElementById("tblPointListings");
		if(tblPointListings!=undefined)
		{
			for(var i=0; i< tblPointListings.tBodies.length;i++ )			{				tblPointListings.tBodies[i].style.backgroundColor="white";			}
		}
	}
	
	function btQuestSelect_Click(strPointValueObjectName)
	{//this is a dumb way to do this:
		
		var oPointList = PointValues[strPointValueObjectName];
		if(oPointList!=undefined)		{			oActivePointList=oPointList;		localStorage.setItem("WhichQuest", strPointValueObjectName);	}
		//
		ClearTBODYColors();
		var tbody=document.getElementById("tbody_"+strPointValueObjectName);
		if(tbody!=undefined)		{			tbody.style.backgroundColor = "red";		}
	}
	function FillInFieldsFromStorage()
	{
		if (typeof(Storage) !== "undefined") 
		{
			var strPointValueObjectName=(localStorage.getItem("WhichQuest")||"SlayerQuest");//default to SlayerQuest
			var iLevel= (localStorage.getItem("MonsterLevel")||1);//default 1
	  	var iHits = (localStorage.getItem("NumberHits")||0);//default 0
	  	var bBonus = (localStorage.getItem("Bonus")||false);//default false
	  	sV("ddlMonsterLevel",iLevel);
	  	sV("tbNumAttacks",iHits);
	  	sCB("cbKillAlsoGetsHit",bBonus);
	  	//		
			btQuestSelect_Click(strPointValueObjectName); 
		}
	}
	function SaveFieldsToStorage()
	{
		if (typeof(Storage) !== "undefined") 
		{
			var iLevel=parseInt(gV("ddlMonsterLevel"));
			var iHits=parseInt(gV("tbNumAttacks"));
			var bBonus=gCB("cbKillAlsoGetsHit");
    	localStorage.setItem("MonsterLevel", iLevel);
    	localStorage.setItem("NumberHits", iHits);
    	localStorage.setItem("Bonus", bBonus);
		} 
		else 
		{
		    // Sorry! No Web Storage support..
		}
	}
	
	function bodyLoad()
	{
		PointListToTable("SlayerQuest");
		PointListToTable("DailyClan");
		PointListToTable("DragonQuest");
		PointListToTable("AllYouCanSlay");
		//
		FillInFieldsFromStorage();		
	}
	
	function btCalculate_click()
	{
		SaveFieldsToStorage();
		var strResult="";
		var iMH=oActivePointList.MonsterHit;
		var iMK=oActivePointList.MonsterKill;
		var iLevel=parseInt(gV("ddlMonsterLevel"));
		var iHits=parseInt(gV("tbNumAttacks"));
		var strBonus=gCB("cbKillAlsoGetsHit");
		strResult+="["+oActivePointList.Name+"]\r\n";
		strResult+="Level: "+iLevel+", ";
		strResult+="Hits: "+iHits+", ";
		strResult+="Bonus: "+strBonus+"\r\n";
		strResult+"\r\n";
		
		var pts=(iLevel*iMH)*(iHits-1);
		pts+=(iLevel*iMK);
		if(strBonus==true)
		{
			pts+=(iLevel*iMH);
		}
		strResult+="Points: "+pts+"\r\n";
		sV("tbOutput",strResult);
	}
	
</script>
</head>
<body onload="bodyLoad();">
	
	<table id="tblPointListings" border="1" cellspacing="2" cellpadding="5">	</table>
	
<br/>
<div>
	
	Monster Level:
	<select id="ddlMonsterLevel">
  	<option value="1">Level 1</option>
  	<option value="2">Level 2</option>
  	<option value="3">Level 3</option>
  	<!-- -->
  	<option value="4">Level 4</option>
  	<option value="5">Level 5</option>
  	<option value="6">Level 6</option>
  	<!-- -->
  	<option value="7">Level 7</option>
  	<option value="8">Level 8</option>
  	<option value="9">Level 9</option>  	
	</select> 
	<br/>
	Number of Attacks: <input type="text" id="tbNumAttacks" /><br/>
	<label>Does my last attack get points for kill AND hit? <input type="checkbox" id="cbKillAlsoGetsHit"/></label><br/>
	<br/>
	<button id="btCalculate" onclick="btCalculate_click()">Calculate</button>
	<br/>
	<br/>
	<br/>
	<textarea id="tbOutput" cols="48" rows="12"></textarea>
</div>
</body>
</html>

